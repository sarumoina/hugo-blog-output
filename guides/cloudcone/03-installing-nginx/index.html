<!DOCTYPE html>
<html><head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.3/css/bulma.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.4.0/build/styles/default.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Oleo+Script&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.4.0/build/highlight.min.js"></script>
    <link href='https://unpkg.com/css.gg/icons/all.css' rel='stylesheet'>
    <script>hljs.highlightAll();</script>
    
    
    <title>endr.in | 03 Installing Nginx</title>
    <meta name="description" content=" No information available ">
</head><body>
        <section class="section">
            <div class="container content"><div class="content has-text-centered-mobile has-text-left-desktop">
    <span class="title is-size-3-desktop is-size-3-mobile"><a href="/" style="text-decoration: none; color: #4a4a4a; font-family: 'Oleo Script', cursive;">blog.endr.in</a></span> <ion-icon class="has-text-primary" name="bulb-outline"></ion-icon>
</div><div id="content">
                <div class="columns">
                    <div class="column is-9 has-text-justified">
<h1 class="title is-size-5">03 Installing Nginx</h1>


<i data-feather="calendar"></i>
<time datetime="2022-05-16">May 16, 2022</time> | Tags:

<i data-feather="tag"></i>


<a class="tag is-light is-primary" href="https://blog.endr.in/tags/guides">guides</a>



<a class="tag is-light is-primary" href="https://blog.endr.in/tags/cloudcone">cloudcone</a>



<a class="tag is-light is-primary" href="https://blog.endr.in/tags/nginx">nginx</a>



<br><br>
<p><strong>Table of Content:</strong></p>
<ul>
<li><a href="#installing-nginx">Installing Nginx:</a></li>
<li><a href="#setting-up-nginx-as-webserver-for-nextjsgatsby">Setting up nginx as webserver for nextjs/gatsby</a></li>
<li><a href="#setting-up-nginx-as-webserver-for-php">Setting up nginx as webserver for php</a></li>
<li><a href="#running-multiple-server-blocks">Running multiple server blocks</a></li>
<li><a href="#retreiving-errors">Retreiving errors</a></li>
</ul>
<h4 id="installing-nginx">Installing Nginx:</h4>
<p>To install nginx, run the following command in terminal:</p>
<pre><code>$ sudo apt install nginx
</code></pre>
<h4 id="setting-up-nginx-as-webserver-for-nextjsgatsby">Setting up nginx as webserver for nextjs/gatsby</h4>
<p>Example config for reverse proxy:</p>
<pre><code># example script for reverse proxy
server {
    server_name example.xopun.com;
    location / {
                # First attempt to serve request as file, then
                # as directory, then fall back to displaying a 404.
                proxy_pass http://localhost:5000;
                proxy_http_version 1.1;
                proxy_set_header Upgrade $http_upgrade;
                proxy_set_header Connection 'upgrade';
                proxy_set_header Host $host;
                proxy_cache_bypass $http_upgrade;
        }
}
</code></pre>


<div class='notification is-light is-warning'>

    <strong>Note:</strong>
    
    <p>
If you get any errors stating Can't start Nginx - Job for nginx.service failed then especially check the line endings. Every line should end with a ";" otherwise this error will popup
</p>
</div>

<h4 id="setting-up-nginx-as-webserver-for-php">Setting up nginx as webserver for php</h4>
<p>Edit the following in nginx (<code>/etc/nginx/sites-enabled/default</code>):</p>
<pre><code>server {

    server_name example.xopun.com;
    listen 80;
    root /var/www/example.xopun.com;

    index index.php;

    location / {
            try_files $uri $uri/ /index.php?$query_string;
    }


    location ~ \.php$ {
        include snippets/fastcgi-php.conf;
        fastcgi_pass unix:/run/php/php8.0-fpm.sock;
    }

    location ~ /\.ht {
        deny all;
    }
}
</code></pre>
<p>We are using the <code>php8.0-fpm</code> as the fastcgi gateway in order to serve the php files.</p>
<p>Restart the nginx server via <code>sudo systemctl restart nginx</code>. You can also test the nginx configuration by <code>sudo nginx -t</code>.</p>
<h4 id="running-multiple-server-blocks">Running multiple server blocks</h4>
<p>Just put them in their own file inside the server block as shown above. The files should be put in <code>/etc/nginx/sites-enabled/</code> folder.</p>
<h4 id="retreiving-errors">Retreiving errors</h4>
<pre><code>$ sudo tail /var/log/nginx/error.log -n 200
</code></pre>


                    </div>
                    <div class="column is-3">
                        <h5 class="title is-size-5">Tags</h5>
                        <ul>
                         
                        
                            <li><a class="is-uppercase is-size-7" href=/tags/assignment/ title="All pages with tag <i>assignment</i>">assignment (2)</a>
                                </li>
                         
                         
                        
                            <li><a class="is-uppercase is-size-7" href=/tags/bsoc-101/ title="All pages with tag <i>bsoc-101</i>">bsoc-101 (14)</a>
                                </li>
                         
                         
                        
                            <li><a class="is-uppercase is-size-7" href=/tags/bsoc-102/ title="All pages with tag <i>bsoc-102</i>">bsoc-102 (2)</a>
                                </li>
                         
                         
                        
                            <li><a class="is-uppercase is-size-7" href=/tags/cloudcone/ title="All pages with tag <i>cloudcone</i>">cloudcone (4)</a>
                                </li>
                         
                         
                        
                            <li><a class="is-uppercase is-size-7" href=/tags/concept/ title="All pages with tag <i>concept</i>">concept (3)</a>
                                </li>
                         
                         
                        
                            <li><a class="is-uppercase is-size-7" href=/tags/guides/ title="All pages with tag <i>guides</i>">guides (4)</a>
                                </li>
                         
                         
                        
                            <li><a class="is-uppercase is-size-7" href=/tags/nginx/ title="All pages with tag <i>nginx</i>">nginx (1)</a>
                                </li>
                         
                         
                        
                            <li><a class="is-uppercase is-size-7" href=/tags/nodejs/ title="All pages with tag <i>nodejs</i>">nodejs (1)</a>
                                </li>
                         
                         
                        
                            <li><a class="is-uppercase is-size-7" href=/tags/people/ title="All pages with tag <i>people</i>">people (14)</a>
                                </li>
                         
                         
                        
                            <li><a class="is-uppercase is-size-7" href=/tags/study/ title="All pages with tag <i>study</i>">study (16)</a>
                                </li>
                         
                         
                        
                            <li><a class="is-uppercase is-size-7" href=/tags/yarn/ title="All pages with tag <i>yarn</i>">yarn (1)</a>
                                </li>
                         
                         

                       
                        </ul>

                        
                    </div>
                </div>
            </div>
            </div>
        </section><div class="content has-text-centered" style="padding: 2em;">                
    <hr />
    <p>
        <a href="/tags">Tags</a>&nbsp;|&nbsp;<a href="/archive">Archive</a>&nbsp;|&nbsp;<ion-icon name="mail-outline"></ion-icon> contact@endr.in
    </p>              
    <p class=is-size-7>
        <a href="https://blog.endr.in">blog.endr.in</a> is a subsidiary of endr.in and the content of this site is licensed under CC attribution. 
        <br />The content available on this site are for educational purpose only. If you have sole right to a portion/whole, then kindly write to us at <span class="has-text-primary-dark"><ion-icon name="mail-outline"></ion-icon> contact@endr.in</span> for take down of relevent content. 
    </p>               
</div><script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
        <script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>
    </body>
</html>
